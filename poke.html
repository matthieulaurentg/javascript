<!DOCTYPE html>
<html>
<head>
  <title>Pokemon Battle Simulator</title>
  <style>
    button {
      display: block;
      margin-bottom: 5px;
    }
  </style>
</head>
<body>
  <h1>Pokemon Battle Simulator</h1>
  <div id="battleLog"></div>
  <div id="playerControls">
    <h2>Your Pokemon: <span id="playerPokemonName"></span></h2>
    <p>HP: <span id="playerPokemonHP"></span></p>
    <p>Attack: <span id="playerPokemonAttack"></span></p>
    <button onclick="move1()">Move 1</button>
    <button onclick="move2()">Move 2</button>
    <button onclick="move3()">Move 3</button>
    <button onclick="move4()">Move 4</button>
  </div>
  <div id="opponentControls">
    <h2>Opponent: <span id="opponentName"></span></h2>
    <h3>Their Pokemon: <span id="opponentPokemonName"></span></h3>
    <p>HP: <span id="opponentPokemonHP"></span></p>
  </div>
  <div id="pokemonSelection">
    <h2>Select your Pokemon:</h2>
    <button onclick="selectPokemon(pikachu)">Pikachu</button>
    <button onclick="selectPokemon(bulbasaur)">Bulbasaur</button>
    <button onclick="selectPokemon(charmander)">Charmander</button>
    <button onclick="selectPokemon(squirtle)">Squirtle</button>
    <button onclick="selectPokemon(butterfree)">Butterfree</button>
    <button onclick="selectPokemon(geodude)">Geodude</button>
    <button onclick="selectPokemon(onix)">Onix</button>
    <button onclick="selectPokemon(clefairy)">Clefairy</button>
    <button onclick="selectPokemon(jigglypuff)">Jigglypuff</button>
    <button onclick="selectPokemon(zubat)">Zubat</button>
    <button onclick="selectPokemon(oddish)">Oddish</button>
    <button onclick="selectPokemon(diglett)">Diglett</button>
    <button onclick="selectPokemon(meowth)">Meowth</button>
    <button onclick="selectPokemon(psyduck)">Psyduck</button>
    <button onclick="selectPokemon(mankey)">Mankey</button>
  </div>
  <div id="typeChart">
    <h2>Type Chart</h2>
    <p>Normal: -</p>
    <p>Fire: Grass 0.5x, Water 0.5x, Fire 0.5x, Ground 2x</p>
    <p>Water: Fire 2x, Water 0.5x, Grass 0.5x, Rock 2x</p>
    <p>Grass: Water 2x, Fire 0.5x, Grass 0.5x, Ground 2x</p>
    <p>Electric: Water 2x, Grass 0.5x, Electric 0.5x, Ground 0x</p>
    <p>Rock: Fire 2x, Water 2x, Grass 2x, Fighting 0.5x, Ground 0.5x</p>
    <p>Ground: Fire 2x, Water 2x, Grass 0.5x, Rock 0.5x, Electric 2x</p>
    <p>Bug: Fire 0.5x, Grass 2x, Fighting 0.5x</p>
    <p>Fighting: Rock 2x, Bug 0.5x, Normal 2x</p>
  </div>
  <script>
    // Pokemon class
    class Pokemon {
      constructor(name, type, hp, attack, defense, moves) {
        this.name = name;
        this.type = type;
        this.hp = hp;
        this.attack = attack;
        this.defense = defense;
        this.moves = moves;
      }

      useMove(move, opponent) {
        const damage = Math.max(this.attack * move.power - opponent.defense, 0);
        const typeEffectiveness = getTypeEffectiveness(move.type, opponent.type);
        const totalDamage = damage * typeEffectiveness;
        opponent.hp -= totalDamage;
        log(`You used ${move.name}! ${this.name} dealt ${totalDamage} damage to ${opponent.name}!`);
      }

      defend() {
        this.defense *= 2;
        log(`${this.name} defended and increased its defense!`);
      }
    }

    // Create Pokemon
    const pikachu = new Pokemon('Pikachu', 'Electric', 100, 50, 20, [
      { name: 'Thunderbolt', type: 'Electric', power: 1.5 },
      { name: 'Quick Attack', type: 'Normal', power: 1.2 },
      { name: 'Iron Tail', type: 'Steel', power: 1.4 },
      { name: 'Electro Ball', type: 'Electric', power: 1.6 }
    ]);
    const bulbasaur = new Pokemon('Bulbasaur', 'Grass', 120, 40, 30, [
      { name: 'Razor Leaf', type: 'Grass', power: 1.3 },
      { name: 'Vine Whip', type: 'Grass', power: 1.1 },
      { name: 'Leech Seed', type: 'Grass', power: 0.8 },
      { name: 'Seed Bomb', type: 'Grass', power: 1.5 }
    ]);
    const charmander = new Pokemon('Charmander', 'Fire', 80, 60, 15, [
      { name: 'Flamethrower', type: 'Fire', power: 1.7 },
      { name: 'Ember', type: 'Fire', power: 1.2 },
      { name: 'Scratch', type: 'Normal', power: 1.1 },
      { name: 'Fire Spin', type: 'Fire', power: 1.4 }
    ]);
    const squirtle = new Pokemon('Squirtle', 'Water', 110, 45, 25, [
      { name: 'Hydro Pump', type: 'Water', power: 1.4 },
      { name: 'Water Gun', type: 'Water', power: 1.1 },
      { name: 'Bubble', type: 'Water', power: 1.2 },
      { name: 'Aqua Tail', type: 'Water', power: 1.6 }
    ]);
    const butterfree = new Pokemon('Butterfree', 'Bug', 90, 55, 15, [
      { name: 'Silver Wind', type: 'Bug', power: 1.6 },
      { name: 'Gust', type: 'Flying', power: 1.1 },
      { name: 'Psybeam', type: 'Psychic', power: 1.3 },
      { name: 'Bug Buzz', type: 'Bug', power: 1.5 }
    ]);
    const geodude = new Pokemon('Geodude', 'Rock', 130, 35, 40, [
      { name: 'Rock Throw', type: 'Rock', power: 1.2 },
      { name: 'Tackle', type: 'Normal', power: 1.1 },
      { name: 'Rock Blast', type: 'Rock', power: 1.4 },
      { name: 'Rollout', type: 'Rock', power: 1.6 }
    ]);
    const onix = new Pokemon('Onix', 'Rock', 150, 25, 60, [
      { name: 'Rock Slide', type: 'Rock', power: 1.8 },
      { name: 'Bind', type: 'Normal', power: 1.2 },
      { name: 'Iron Head', type: 'Steel', power: 1.6 },
      { name: 'Stone Edge', type: 'Rock', power: 1.7 }
    ]);
    const clefairy = new Pokemon('Clefairy', 'Normal', 100, 45, 30, [
      { name: 'Moonblast', type: 'Fairy', power: 1.5 },
      { name: 'Disarming Voice', type: 'Fairy', power: 1.3 },
      { name: 'Metronome', type: 'Normal', power: 1.1 },
      { name: 'Cosmic Power', type: 'Psychic', power: 0.9 }
    ]);
    const jigglypuff = new Pokemon('Jigglypuff', 'Normal', 115, 35, 25, [
      { name: 'Hyper Voice', type: 'Normal', power: 1.4 },
      { name: 'Pound', type: 'Normal', power: 1.1 },
      { name: 'Body Slam', type: 'Normal', power: 1.3 },
      { name: 'Double Slap', type: 'Normal', power: 1.2 }
    ]);
    const zubat = new Pokemon('Zubat', 'Poison', 80, 45, 20, [
      { name: 'Poison Fang', type: 'Poison', power: 1.4 },
      { name: 'Astonish', type: 'Ghost', power: 1.1 },
      { name: 'Bite', type: 'Dark', power: 1.3 },
      { name: 'Air Cutter', type: 'Flying', power: 1.2 }
    ]);
    const oddish = new Pokemon('Oddish', 'Grass', 90, 35, 25, [
      { name: 'Absorb', type: 'Grass', power: 1.2 },
      { name: 'Acid', type: 'Poison', power: 1.1 },
      { name: 'Stun Spore', type: 'Grass', power: 0.9 },
      { name: 'Petal Dance', type: 'Grass', power: 1.5 }
    ]);
    const diglett = new Pokemon('Diglett', 'Ground', 100, 40, 30, [
      { name: 'Earthquake', type: 'Ground', power: 1.6 },
      { name: 'Mud Slap', type: 'Ground', power: 1.2 },
      { name: 'Scratch', type: 'Normal', power: 1.1 },
      { name: 'Sucker Punch', type: 'Dark', power: 1.4 }
    ]);
    const meowth = new Pokemon('Meowth', 'Normal', 80, 50, 20, [
      { name: 'Fury Swipes', type: 'Normal', power: 1.2 },
      { name: 'Scratch', type: 'Normal', power: 1.1 },
      { name: 'Fake Out', type: 'Normal', power: 1.3 },
      { name: 'Feint Attack', type: 'Dark', power: 1.4 }
    ]);
    const psyduck = new Pokemon('Psyduck', 'Water', 100, 35, 25, [
      { name: 'Water Pulse', type: 'Water', power: 1.3 },
      { name: 'Confusion', type: 'Psychic', power: 1.2 },
      { name: 'Scratch', type: 'Normal', power: 1.1 },
      { name: 'Zen Headbutt', type: 'Psychic', power: 1.4 }
    ]);
    const mankey = new Pokemon('Mankey', 'Fighting', 90, 60, 20, [
      { name: 'Karate Chop', type: 'Fighting', power: 1.4 },
      { name: 'Fury Swipes', type: 'Normal', power: 1.2 },
      { name: 'Low Kick', type: 'Fighting', power: 1.3 },
      { name: 'Cross Chop', type: 'Fighting', power: 1.6 }
    ]);

    // Initialize battle
    let playerPokemon;
    let opponentPokemon;
    let opponentName;

    // Select Pokemon
    function selectPokemon(pokemon) {
      playerPokemon = pokemon;
      document.getElementById('pokemonSelection').style.display = 'none';
      document.getElementById('playerControls').style.display = 'block';
      document.getElementById('opponentControls').style.display = 'block';
      generateOpponent();
      updateUI();
      enableControls();
    }

    // Generate opponent
    function generateOpponent() {
      const opponents = [
        { name: 'Ash', pokemon: pikachu },
        { name: 'Misty', pokemon: squirtle },
        { name: 'Brock', pokemon: geodude },
        { name: 'Gary', pokemon: charmander },
        { name: 'Jessie', pokemon: butterfree },
        { name: 'James', pokemon: bulbasaur },
        { name: 'Roark', pokemon: onix },
        { name: 'Maylene', pokemon: mankey },
        { name: 'Bugsy', pokemon: butterfree },
        { name: 'Falkner', pokemon: psyduck },
        { name: 'Whitney', pokemon: clefairy },
        { name: 'Morty', pokemon: zubat },
        { name: 'Jasmine', pokemon: meowth },
        { name: 'Chuck', pokemon: geodude },
        { name: 'Pryce', pokemon: oddish }
      ];
      const randomIndex = Math.floor(Math.random() * opponents.length);
      opponentName = opponents[randomIndex].name;
      opponentPokemon = opponents[randomIndex].pokemon;
    }

    // Battle functions
    function move1() {
      playerPokemon.useMove(playerPokemon.moves[0], opponentPokemon);
      updateUI();
      enemyTurn();
    }

    function move2() {
      playerPokemon.useMove(playerPokemon.moves[1], opponentPokemon);
      updateUI();
      enemyTurn();
    }

    function move3() {
      playerPokemon.useMove(playerPokemon.moves[2], opponentPokemon);
      updateUI();
      enemyTurn();
    }

    function move4() {
      playerPokemon.useMove(playerPokemon.moves[3], opponentPokemon);
      updateUI();
      enemyTurn();
    }

    function defend() {
      playerPokemon.defend();
      updateUI();
      enemyTurn();
    }

    function enemyTurn() {
      const randomMove = Math.floor(Math.random() * 4);
      opponentPokemon.useMove(opponentPokemon.moves[randomMove], playerPokemon);
      updateUI();
      checkWinner();
    }

    function checkWinner() {
      if (playerPokemon.hp <= 0) {
        log(`${opponentName}'s ${opponentPok